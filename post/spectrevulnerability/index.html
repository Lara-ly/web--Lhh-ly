<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
    
















<script defer language="javascript" type="text/javascript" src="/web--Lhh-ly/js/bundle.min.b1a77621f7943a9942cf6d351fddc96d11744febd5be467e13b1a35eca3a73d4.js"></script>





  



    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=/favicon.png>

    
    





  





  
  
  


<!-- Open Graph image and Twitter Card metadata -->

<title itemprop="name">Lhh web-site - Spectre Vulnerability</title>
<meta property="og:title" content=Lhh&#32;web-site&#32;-&#32;Spectre&#32;Vulnerability />
<meta name="twitter:title" content=Lhh&#32;web-site&#32;-&#32;Spectre&#32;Vulnerability />
<meta itemprop="name" content=Lhh&#32;web-site&#32;-&#32;Spectre&#32;Vulnerability />
<meta name="application-name" content=Lhh&#32;web-site&#32;-&#32;Spectre&#32;Vulnerability />
<meta property="og:site_name" content="" />


<meta name="description" content="" />
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />


<base href="https://lara-ly.github.io/web--Lhh-ly/post/spectrevulnerability/" />
<link rel="canonical" href="https://lara-ly.github.io/web--Lhh-ly/post/spectrevulnerability/" itemprop="url" />
<meta name="url" content="https://lara-ly.github.io/web--Lhh-ly/post/spectrevulnerability/" />
<meta name="twitter:url" content="https://lara-ly.github.io/web--Lhh-ly/post/spectrevulnerability/" />
<meta property="og:url" content="https://lara-ly.github.io/web--Lhh-ly/post/spectrevulnerability/" />


<meta property="og:updated_time" content="2024-07-21T16:28:42&#43;02:00" />


<link rel="sitemap" type="application/xml" title="Sitemap" href='https://lara-ly.github.io/web--Lhh-ly/sitemap.xml' />

<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />


<meta name="twitter:site" content="" />
<meta name="twitter:creator" content="" />
<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />






<meta name="generator" content="Hugo 0.128.2">


    
    

<link type="text/css" rel="stylesheet" href="/web--Lhh-ly/css/bundle.min.94a339836f89f0d25f31980cb6b0631da21e20af128308747ce44e0525eb16ef.css">


    
    <style>
    body {
        --sidebar-bg-color: #202020;
        --sidebar-img-border-color: #515151;
        --sidebar-p-color: #909090;
        --sidebar-h1-color: #FFF;
        --sidebar-a-color: #FFF;
        --sidebar-socials-color: #FFF;
        --text-color: #222;
        --bkg-color: #FAF9F6;
        --post-title-color: #303030;
        --list-color: #5a5a5a;
        --link-color: #268bd2;
        --date-color: #515151;
        --table-border-color: #E5E5E5;
        --table-stripe-color: #F9F9F9;
        --code-color: #000;
        --code-background-color: #E5E5E5;
        --code-block-color: #fff;
        --code-block-background-color: #272822;
        --moon-sun-color: #FFF;
        --moon-sun-background-color: #515151;
    }
    body.dark-theme {
        --text-color: #eee;
        --bkg-color: #121212;
        --post-title-color: #DBE2E9;
        --list-color: #9d9d9d;
        --link-color: #268bd2;
        --date-color: #9a9a9a;
        --table-border-color: #515151;
        --table-stripe-color: #202020;
        --code-color: #fff;
        --code-background-color: #515151;
        --code-block-color: #fff;
        --code-block-background-color: #272822;
    }
    body {
        background-color: var(--bkg-color);
    }
</style>

</head>

    <body class="">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="light-dark" align="right">
    <button class="btn-light-dark" title="Toggle light/dark mode">
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M6 .278a.768.768 0 0 1 .08.858a7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277c.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316a.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71C0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </svg>
    </button>
</div>

        <div class="sidebar-about">
    <h1 class="brand">
        
        
            <a href="https://lara-ly.github.io/web--Lhh-ly/">
                <h1>Lhh web-site</h1>
            </a>
        
    </h1>
    <p class="lead">
    Software engineer studient interesed in cybersecurity, linux and everything related to low-level computing issues
    </p>
</div>

        <nav>
    <ul class="sidebar-nav">

        
        
        
        
            

            
                
                
            
            
                
                
            
                
                
            
        
        
            

            
                
                
                    <li class="heading">
                        <a href="/posts/">Posts</a>
                    </li>
                    
                        <li class="sub-heading">
                            Recent
                        </li>
                        
                            <li class="bullet">
                                <a href="https://lara-ly.github.io/web--Lhh-ly/post/spectrevulnerability/">Spectre Vulnerability</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="https://lara-ly.github.io/web--Lhh-ly/post/comandoslinux/">Comandos que me parecen útiles de Linux</a>
                            </li>
                        
                    
                
            
            
                
                
            
                
                
            
        
        
            

            
                
                
            
            
                
                
            
                
                
            
        

    </ul>
</nav>

        
















        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 . All rights reserved.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post">
  <div class="info">
  <h1 class="post-title">
    <a href="https://lara-ly.github.io/web--Lhh-ly/post/spectrevulnerability/">Spectre Vulnerability</a>
  </h1>

  <div class="headline">
    <div>
      
      <time datetime=" 2024-07-21T16:28:42&#43;0200" class="post-date">
        July 21, 2024
      </time>
      
      <span> - </span>
      <span class="reading-time">
        
          
        

        <span>3 mins read</span>
      </span>
    </div>

    
  </div>

  
  

  
</div>

  <p>Spectre es una de las vulnerabilidades de seguridad más importantes de la última década, afectando a prácticamente todos los procesadores modernos. Spectre explota una de las características de los procesadores modernos conocida como ej<strong>ejecución especulativa</strong>.</p>
<p>La ejecución esculativa se basa en intentar predecir las próximas instrucciones que se ejecutarán y las ejecutan antes de que se confirmen. Si la predicción es correcta se gana tiempo, sino, los resultados especulativos se descartan y se toma el camino correcto.
Spectre engaña al procesador para que ejecute instrucciones especulativas que no deberían haberse ejecutado y luego utiliza canales laterales para leer datos especulativamente ejecutados que deberían haber permanecido inaccesibles.</p>
<p><strong>Tipos de ataque Spectre</strong></p>
<p><strong>1. Spectre Variant 1: Bonuds Chech¡k Bypass</strong></p>
<pre><code>Este ataque manipula las instrucciones de salto condicional (como if en C) para hacer que la CPU ejecute especulativamente instrucciones que acceden a memoria fuera de los límites permitidos. Ejemplo:

´´´c
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

// Datos secretos que el atacante quiere leer
char secret[64] = &quot;Este es un mensaje que el atacante quiere leer&quot;;

// Array utilizado para la especulación
char public_data[256];
char side_channel[256 * 512];

void victim_function(size_t index) {
if (index &lt; 256) {
    char value = public_data[index];
    side_channel[value * 512] = 1;  /* Esta línea es crítica porque crea un acceso a side_channel basado en el valor leído de public_data. Si value proviene de secret (debido a la ejecución especulativa incorrecta), side_channel actúa como un canal lateral para filtrar ese valor.*/
}
}

//atoi convierte la cadena de caracteres apuntada por argv en un valor entero de tipo int.

int main(int argc, char **argv) {
    size_t index = atoi(argv[1]);
    victim_function(index);
    return 0;
}

´´´
</code></pre>
<p><strong>2. Spectre Variant 2: Branch Target Inyection</strong></p>
<p>Este ataque manipula el predictor de ramas de la CPU. El atacante entrena al predictor de ramas para que especule en una dirección particular que permite la ejecución de código malicioso, pudiendo leer datos confidenciales de otras ubicaciones de la memoria.</p>
<pre><code>´´´c

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

// Datos secretos que el atacante quiere leer
char secret[64] = &quot;Datos sensibles que el atacante quiere leer&quot;;
char public_data[256];
char side_channel[256 * 512];

// Función para &quot;entrenar&quot; la CPU para predecir incorrectamente
void train_cpu(size_t malicious_index) {
    for (size_t i = 0; i &lt; 10; i++) {
        victim_function(i, i);  // Entrena la CPU con índices seguros
    }
// Ejecuta la función con el índice malicioso
victim_function(0, malicious_index);
}

void victim_function(size_t index1, size_t index2) {
    if (index1 &lt; 256) {
        if (index2 &lt; 256) {
            char value = public_data[index2];
            side_channel[value * 512] = 1;  // Acceso a canal lateral
        }
    }
}

int main() {
    // Inicializar datos
    memset(public_data, 0, sizeof(public_data));
    memset(side_channel, 0, sizeof(side_channel));

// Copiar datos secretos a public_data para simular un acceso especulativo
memcpy(public_data + 256, secret, sizeof(secret));

// Entrenar la CPU con un índice malicioso
train_cpu(256 + 5);  // Acceso fuera de límites a secret[5]

// Medir el acceso al canal lateral para detectar el valor filtrado
for (int i = 0; i &lt; 256; i++) {
    if (side_channel[i * 512] != 0) {
        printf(&quot;Secret data leaked: %c\n&quot;, (char)i);
    }
}
return 0;
</code></pre>
<p>}</p>
<pre><code>´´´
</code></pre>

  
  <hr>
<div class="footer">
    
	    
            <a class="previous-post" href="https://lara-ly.github.io/web--Lhh-ly/post/comandoslinux/?ref=footer"><span style="font-weight:bold;">« Previous</span><br>Comandos que me parecen útiles de Linux</a>
        
	    
    
</div>

  
</div>
            </main>
            
  

        </div>
    </body>
</html>
